Code for memleak.c:

#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>

int main()
{
  char ch;
  int *ptr;
  int i,j;
  int n=100048576/sizeof(int);  // Size of array

  for(i=1; ;i++) {
    sleep(1);
    printf("i=%d\n", i);
    ptr = (int*)malloc(100048576); // 100MB
    if (ptr==NULL) {
      printf("malloc() failed\n");
      break;
    }
    for(j=0;j<n;j++)ptr[j]=j&1;
  }
  scanf("%c", &ch);
}

Experiment 1

swapon -s: Displays  swap  usage  summary  by  device. 
$ swapon -s
Filename                Type        Size    Used    Priority
/dev/dm-1               partition   839676  80896   -2

free: This commands display amount of free and used memory in the system
$ free -mh
              total        used        free      shared  buff/cache   available
Mem:           3.7G         122M        3.5G        8.6M         77M        3.4G
Swap:          0B           0B           0B

Now compile the program and examine the live free space available using vmstat
$ gcc memleak.c -o memleak
$ ./memleak 
i=1
i=2
i=3
i=4
i=5
i=6
i=7
i=8
i=9
i=10
i=11
i=12
i=13
i=14
i=15
i=16
i=17
i=18
i=19
i=20
i=21
i=22
i=23
i=24
i=25
i=26
i=27
i=28
i=29
i=30
i=31
i=32
i=33
i=34
i=35
i=36
i=37
malloc() failed
f

vmstat - Report virtual memory statistics
$ vmstat -t 1
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- -----timestamp-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st                 EDT
 2  0      0 3619544    188 130260    0    0    65     3   52   91  0  0 99  0  0 2019-04-23 05:15:02
 0  0      0 3619700    188 130260    0    0     0     0   52   94  0  0 100  0  0 2019-04-23 05:15:03
 0  0      0 3619748    188 130260    0    0     0    24   41   83  0  0 100  0  0 2019-04-23 05:15:04
 0  0      0 3522908    188 130260    0    0     0     0   47   60  1  0 99  0  0 2019-04-23 05:15:05
 0  0      0 3424856    188 130260    0    0     0     0   45   61  0  1 99  0  0 2019-04-23 05:15:06
 0  0      0 3326864    188 130260    0    0     0     0   48   64  1  0 99  0  0 2019-04-23 05:15:07
 0  0      0 3229120    188 130260    0    0     0     0   46   60  1  0 99  0  0 2019-04-23 05:15:08
 0  0      0 3131192    188 130260    0    0     0     0   52   59  1  0 99  0  0 2019-04-23 05:15:09
 0  0      0 3033324    188 130260    0    0     0     0   51   65  1  0 99  0  0 2019-04-23 05:15:10
 2  0      0 3010300    188 130260    0    0     0     0   47   69  0  1 99  0  0 2019-04-23 05:15:11
 0  0      0 2935332    188 130260    0    0     0     4   47   64  0  0 100  0  0 2019-04-23 05:15:12
 0  0      0 2837404    188 130260    0    0     0     0   47   60  1  1 98  0  0 2019-04-23 05:15:13
 0  0      0 2739536    188 130260    0    0     0     0   58   65  1  0 99  0  0 2019-04-23 05:15:14
 0  0      0 2641792    188 130260    0    0     0     0   54   60  1  1 98  0  0 2019-04-23 05:15:15
 0  0      0 2543800    188 130260    0    0     0     0   47   60  2  0 98  0  0 2019-04-23 05:15:16
 0  0      0 2445996    188 130260    0    0     0     0   50   60  1  0 99  0  0 2019-04-23 05:15:17
 0  0      0 2347880    188 130260    0    0     0     0   50   62  0  0 100  0  0 2019-04-23 05:15:18
 0  0      0 2250136    188 130260    0    0     0     0   47   60  1  1 98  0  0 2019-04-23 05:15:19
 0  0      0 2151664    188 130260    0    0     0     0   51   77  1  0 99  0  0 2019-04-23 05:15:20
 0  0      0 2053672    188 130260    0    0     0     0   47   62  1  1 98  0  0 2019-04-23 05:15:21
 0  0      0 1955928    188 130260    0    0     0     0   42   60  0  0 100  0  0 2019-04-23 05:15:22
 0  0      0 1857844    188 130260    0    0     0     0   57   80  1  0 99  0  0 2019-04-23 05:15:23
 0  0      0 1760428    188 130260    0    0     0     0   38   54  0  1 99  0  0 2019-04-23 05:15:24
 0  0      0 1662684    188 130260    0    0     0     0   52   63  1  0 99  0  0 2019-04-23 05:15:25
 2  0      0 1623276    188 130260    0    0     0     0   42   59  1  0 99  0  0 2019-04-23 05:15:26
 0  0      0 1564816    188 130260    0    0     0    12   47   64  1  0 99  0  0 2019-04-23 05:15:27
 0  0      0 1466764    188 130260    0    0     0     0   38   55  0  2 98  0  0 2019-04-23 05:15:28
 0  0      0 1369020    188 130260    0    0     0     0   47   61  1  0 99  0  0 2019-04-23 05:15:29
 0  0      0 1271152    188 130260    0    0     0     0   48   61  1  0 99  0  0 2019-04-23 05:15:30
 0  0      0 1173348    188 130260    0    0     0     0   50   62  1  1 98  0  0 2019-04-23 05:15:31
 1  0      0 1075356    188 130260    0    0     0     0   43   60  0  0 100  0  0 2019-04-23 05:15:32
 1  0      0 977488    188 130260    0    0     0     0   56   66  1  0 99  0  0 2019-04-23 05:15:33
 0  0      0 879620    188 130260    0    0     0   103   46   71  1  0 99  0  0 2019-04-23 05:15:34
 0  0      0 781816    188 130260    0    0     0     0   49   63  1  1 98  0  0 2019-04-23 05:15:35
 0  0      0 683824    188 130260    0    0     0     0   42   57  0  0 100  0  0 2019-04-23 05:15:36
 0  0      0 585956    188 130260    0    0     0     0   55   68  1  0 99  0  0 2019-04-23 05:15:37
 0  0      0 488152    188 130260    0    0     0     0   43   59  1  1 98  0  0 2019-04-23 05:15:38
 1  0      0 431368    188 130260    0    0     0     0   49   60  1  0 99  0  0 2019-04-23 05:15:39
 0  0      0 390160    188 130260    0    0     0     0   40   54  0  1 99  0  0 2019-04-23 05:15:40
 0  0      0 292292    188 130260    0    0     0     0   74   63  1  3 96  0  0 2019-04-23 05:15:41
 1  0      0 194300    188 130260    0    0     0     0   43   61  1  0 99  0  0 2019-04-23 05:15:42
 0  0      0 144004      0  86116    0    0     0    25   51   59  1  0 99  0  0 2019-04-23 05:15:43
 0  0      0 143920      0  86104    0    0     0     0   12   15  0  0 100  0  0 2019-04-23 05:15:44


Here the total free space is 3.7G and in each iteration we allocate 100M. So the program is able to run for 37 iterations before it fails.

Experiment 2

Here, we switch on swap. So we get more swap space for allocation.

$ free -mh
              total        used        free      shared  buff/cache   available
Mem:           3.7G         60M        3.6G        1.4M         67M        3.5G
Swap:          819M         78M        741M

$ ./memleak 
i=1
i=2
i=3
i=4
i=5
i=6
i=7
i=8
i=9
i=10
i=11
i=12
i=13
i=14
i=15
i=16
i=17
i=18
i=19
i=20
i=21
i=22
i=23
i=24
i=25
i=26
i=27
i=28
i=29
i=30
i=31
i=32
i=33
i=34
i=35
i=36
i=37
i=38
i=39
i=40
i=41
i=42
i=43
i=44
i=45
i=46
malloc() failed
g

$ vmstat -t 1

procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- -----timestamp-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st                 EDT
 1  0      0 3659768      4  94352    0    0    64     3   50   87  0  0 99  0  0 2019-04-23 05:18:17
 0  0      0 3659768      4  94356    0    0     0     0   38   63  0  0 100  0  0 2019-04-23 05:18:18
 0  0      0 3659768      4  94356    0    0     0     0   30   54  0  1 99  0  0 2019-04-23 05:18:19
 0  0      0 3659348      4  94356    0    0     0     0   46   71  0  0 100  0  0 2019-04-23 05:18:20
 0  0      0 3659348      4  94356    0    0     0     0   31   58  0  0 100  0  0 2019-04-23 05:18:21
 0  0      0 3659348      4  94356    0    0     0     4   42   71  0  0 100  0  0 2019-04-23 05:18:22
 0  0      0 3659488      4  94356    0    0     0     0   44   79  0  0 100  0  0 2019-04-23 05:18:23
 0  0      0 3659520      4  94356    0    0     0     0   36   60  0  1 99  0  0 2019-04-23 05:18:24
 0  0      0 3659520      4  94356    0    0     0     0   43   74  0  0 100  0  0 2019-04-23 05:18:25
 0  0      0 3561864      4  94356    0    0     0     0   46   60  1  0 99  0  0 2019-04-23 05:18:26
 0  0      0 3464464      4  94356    0    0     0    16   46   61  0  1 99  0  0 2019-04-23 05:18:27
 0  0      0 3366580      4  94356    0    0     0     0   45   55  1  0 99  0  0 2019-04-23 05:18:28
 0  0      0 3268588      4  94356    0    0     0     0   51   60  2  0 98  0  0 2019-04-23 05:18:29
 2  0      0 3172024      4  94356    0    0     0     0   51   76  0  1 99  0  0 2019-04-23 05:18:30
 0  0      0 3170784      4  94356    0    0     0     0   33   59  0  0 100  0  0 2019-04-23 05:18:31
 0  0      0 3072916      4  94356    0    0     0     0   46   61  1  0 99  0  0 2019-04-23 05:18:32
 0  0      0 2975048      4  94356    0    0     0     0   43   56  1  1 98  0  0 2019-04-23 05:18:33
 0  0      0 2877180      4  94356    0    0     0     0   55   62  2  0 98  0  0 2019-04-23 05:18:34
 0  0      0 2779376      4  94356    0    0     0     4   50   72  1  1 98  0  0 2019-04-23 05:18:35
 0  0      0 2681384      4  94356    0    0     0     0   45   60  0  0 100  0  0 2019-04-23 05:18:36
 0  0      0 2583516      4  94356    0    0     0     0   46   63  1  0 99  0  0 2019-04-23 05:18:37
 0  0      0 2485588      4  94356    0    0     0     0   60   60  2  0 98  0  0 2019-04-23 05:18:38
 0  0      0 2387720      4  94356    0    0     0     0   55   61  1  1 98  0  0 2019-04-23 05:18:39
 0  0      0 2289728      4  94356    0    0     0     0   66   73  1  0 99  0  0 2019-04-23 05:18:40
 0  0      0 2191860      4  94356    0    0     0     0   46   62  1  0 99  0  0 2019-04-23 05:18:41
 0  0      0 2094056      4  94356    0    0     0     0   43   60  1  1 98  0  0 2019-04-23 05:18:42
 0  0      0 1996188      4  94356    0    0     0     0   43   61  0  0 100  0  0 2019-04-23 05:18:43
 1  0      0 1967020      4  94356    0    0     0     0   45   54  2  0 98  0  0 2019-04-23 05:18:44
 0  0      0 1898196      4  94356    0    0     0     0   42   56  1  0 99  0  0 2019-04-23 05:18:45
 0  0      0 1800392      4  94356    0    0     0     0   46   61  0  1 99  0  0 2019-04-23 05:18:46
 0  0      0 1702524      4  94356    0    0     0     0   56   60  1  0 99  0  0 2019-04-23 05:18:47
 1  0      0 1604532      4  94356    0    0     0     0   40   54  1  1 98  0  0 2019-04-23 05:18:48
 0  0      0 1506728      4  94356    0    0     0     0   41   60  1  0 99  0  0 2019-04-23 05:18:49
 0  0      0 1408736      4  94356    0    0     0     0   45   61  1  0 99  0  0 2019-04-23 05:18:50
 0  0      0 1310868      4  94356    0    0     0     0   54   58  1  0 99  0  0 2019-04-23 05:18:51
 0  0      0 1213000      4  94356    0    0     0     0   47   61  0  1 99  0  0 2019-04-23 05:18:52
 0  0      0 1115072      4  94356    0    0     0     0   42   58  1  1 98  0  0 2019-04-23 05:18:53
 0  0      0 1017204      4  94356    0    0     0     0   54   59  1  1 98  0  0 2019-04-23 05:18:54
 0  0      0 919336      4  94356    0    0     0     0   50   61  1  0 99  0  0 2019-04-23 05:18:55
 0  0      0 821408      4  94356    0    0     0     0   54   57  1  1 98  0  0 2019-04-23 05:18:56
 0  0      0 723416      4  94356    0    0     0     0   40   55  1  0 99  0  0 2019-04-23 05:18:57
 1  0      0 723416      4  94356    0    0     0     0   36   54  0  0 100  0  0 2019-04-23 05:18:58
 0  0      0 625548      4  94356    0    0     0     0   58   60  2  1 97  0  0 2019-04-23 05:18:59
 0  0      0 527012      4  94356    0    0     0     0   64   75  1  0 99  0  0 2019-04-23 05:19:00
 0  0      0 429332      4  94356    0    0     0     0   50   62  1  1 98  0  0 2019-04-23 05:19:01
 0  0      0 331216      4  94356    0    0     0     0   52   67  1  0 99  0  0 2019-04-23 05:19:02
 0  0      0 233348      4  94356    0    0     0     0   50   71  1  0 99  0  0 2019-04-23 05:19:03
 0  0      0 135840      4  94356    0    0     0     0   56   62  2  1 97  0  0 2019-04-23 05:19:04
 2  2  82440  84336      0  61816   96 109892  4268 109973  169  159  0  3 45 52  0 2019-04-23 05:19:05
 0  2 193288 110320      0  62544  128 83368   128 83368  313  260  1  2  0 96  0 2019-04-23 05:19:06
 0  2 289032 115488      0  63440  180 95744   180 95744  223   99  0  3  0 97  0 2019-04-23 05:19:07
 3  1 362248 112412      0  55328   96 73072    96 73072  154   58  1  2  0 96  0 2019-04-23 05:19:08
 1  2 436488 115728      0  51712  192 170332 11564 170332  249   88  1  6 10 83  0 2019-04-23 05:19:11
 0  4 620288  99008      0  54764  288 87940   624 87940  436  246  0  2  0 98  0 2019-04-23 05:19:13
 0  3 675072  84748      0  54416   32 54788   340 54788  140   60  1  2  0 97  0 2019-04-23 05:19:14
 0  3 748800  84720      0  54280  128 73768   128 73768  148   72  0  3  0 97  0 2019-04-23 05:19:15
 3  3 783104 122316      0  43648   64 90784  9580 90784  366  151  1  2  0 97  0 2019-04-23 05:19:17
 0  1 839676  89840      0  40784   32  788 13256   788  344  180  1  4  0 95  0 2019-04-23 05:19:18
 1  1 839676 100652      0  38988   72   24 38860    24  259  335  0  4 70 27  0 2019-04-23 05:19:19
 1  1 839676  98824      0  41032    0    0 105744     0  831  677  0 45  0 55  0 2019-04-23 05:19:21
 1  1 839676  99196      0  40280    0    0 52416     0  475 1016  0 38  0 63  0 2019-04-23 05:19:23


Here the total free space is 3.7G and swap space is 819M. In each iteration we allocate 100M, so the program is able to run for 46 iterations before it fails.
